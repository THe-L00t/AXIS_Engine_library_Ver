# AXIS Engine 개발 일지 작성 메뉴얼

## 목적

개발 일지는 단순한 작업 기록이 아닌, **아키텍처 결정의 근거와 철학적 일관성을 문서화**하는 도구입니다.

### 핵심 목표
1. **철학적 정당성 기록**: "왜 이렇게 설계했는가"를 5년 뒤에도 설명 가능
2. **아키텍처 결정 추적**: 설계 변경의 이유와 근거 명시
3. **Core Philosophy 준수 검증**: 각 작업이 철학을 따르는지 확인
4. **지식 전달**: 새로운 개발자가 설계 의도를 이해할 수 있도록

---

## 일지 작성 원칙

### 1. 철학 중심 작성
- ✅ **포함**: 아키텍처 결정, 설계 철학, Core Philosophy 검증
- ❌ **제외**: 철학과 무관한 기술적 오류 (빌드 설정, 경로 문제 등)

### 2. 명확한 근거 제시
- 모든 설계 결정에 "왜"를 명시
- Before/After 비교로 개선 사항 명확화

### 3. 검증 가능한 주장
- 추상적 주장보다 구체적 증거
- 테스트 결과로 철학 검증

### 4. 미래 지향적 문서화
- "지금 당연한 것"도 명시적으로 기록
- 5년 뒤 읽을 사람을 위한 맥락 제공

---

## 일지 구조

### 필수 섹션

```markdown
# [작업명] - [간단한 설명]

## 작업 개요
- 무엇을 했는지 한 문단 요약
- 작업 일자, 브랜치, 최종 상태

## 작업 목표
- 이번 작업으로 달성하려는 목표
- Core Philosophy 관점에서의 목표

## 상세 작업 내용
- 구현한 시스템/기능별로 섹션 분리
- 각 시스템의 설계 철학
- 핵심 API/구조
- Before/After 비교 (리팩토링인 경우)

## 철학 검증
- Three Axes Validation (TIME, SPACE, DATA)
- Core Philosophy Compliance 체크리스트
- 철학 준수 점수 (해당되는 경우)

## 테스트 결과
- 테스트 통과/실패 현황
- 주요 검증 항목
- 성능 특성 (해당되는 경우)

## 핵심 성과
- 이번 작업의 주요 성과 요약
- 달성한 마일스톤

## 다음 계획
- 남은 작업
- 다음 단계 계획

## 커밋 메시지
- feature 브랜치용 커밋 메시지
- test 브랜치용 커밋 메시지 (테스트 작성한 경우)

## 참조
- Core Philosophy 요약
- 관련 설계 원칙
```

---

## 섹션별 작성 가이드

### 1. 작업 개요

**목적**: 일지 전체를 한눈에 파악

**작성 요령**:
- 2-3 문장으로 핵심 요약
- 작업 메타데이터 (일자, 브랜치, 상태) 포함
- 최종 결과 명시

**예시**:
```markdown
## 작업 개요
AXIS Engine Core DLL의 핵심 3대 시스템 구축 및 아키텍처 검증 완료.
"Core는 법칙이지 서비스가 아니다" 철학을 준수하며, Memory, Assert, Time
시스템을 구현하고 100% Core purity를 달성.

**작업 일자**: 2025-12-26
**브랜치**: feature/core (구현) / test (검증)
**최종 상태**: ✅ 3대 Core 시스템 완성, 아키텍처 검증 통과 (16/16)
```

---

### 2. 작업 목표

**목적**: 작업의 의도와 방향성 명시

**작성 요령**:
- 기술적 목표와 철학적 목표 모두 포함
- 측정 가능한 목표 설정

**예시**:
```markdown
## 작업 목표

### Core Philosophy 준수
- "Core는 법칙이지 서비스가 아니다"
- 명시적 제어 (암묵적 실행 흐름 없음)
- 결정성 보장 (동일 입력 → 동일 출력)

### 3대 Core 시스템 구축
1. Memory System: 메모리 할당의 단일 진실 공급원
2. Assert System: 개발 시 계약 검증
3. Time System: 시간의 단일 진실 공급원
```

---

### 3. 상세 작업 내용

**목적**: 구현 세부사항과 설계 근거 기록

**작성 요령**:
- 시스템별로 섹션 분리
- 각 시스템마다 다음 구조 사용:
  1. 설계 철학
  2. 구현 구조 (파일 트리)
  3. 핵심 API
  4. 검증 완료 항목

**예시**:
```markdown
### 1. Memory System 구현

#### 설계 철학
- Core는 "메모리 정책"이 아니라 "메모리 수단" 제공
- 사용자가 allocator 선택, 크기 결정, 태그 분류
- 명시적 생명주기 (자동 해제 없음)

#### 구현 구조
\`\`\`
AXIS_core/
├── include/axis/core/
│   └── axis_memory.h          # Public C API
└── src/memory/
    ├── memory_internal.h      # Internal state
    ├── axis_memory.cpp        # Core implementation
    ├── general_allocator.cpp  # General purpose allocator
    ├── pool_allocator.cpp     # Fixed-size pool
    └── frame_allocator.cpp    # Per-frame linear allocator
\`\`\`

#### 핵심 API
\`\`\`c
// 시스템 초기화/종료
AxisResult Axis_InitializeMemory(const AxisMemoryConfig* config);
AxisResult Axis_ShutdownMemory(void);

// Allocator 생성
AxisGeneralAllocator* Axis_CreateGeneralAllocator(...);
\`\`\`

#### 검증 완료
- ✅ 사용자가 allocator 타입 선택
- ✅ Frame 메모리는 Reset 호출 전까지 유지
- ✅ Core는 정책 강제 없음
```

**리팩토링의 경우 Before/After 비교 추가**:
```markdown
#### Before (초기 설계 - 60/100 Core purity)
\`\`\`c
// ❌ 구조체 노출 (ABI 불안정)
typedef struct AxisTimeState { ... } AxisTimeState;
\`\`\`

**문제점**:
- 구조체 필드 추가/제거 시 ABI 깨짐
- 단위 변환은 Core의 책임이 아님

#### After (리팩토링 - 100/100 Core purity)
\`\`\`c
// ✅ 개별 getter (ABI 안정)
AXIS_API AxisTimeMicroseconds Axis_Time_GetTotalElapsed(void);
\`\`\`

**개선 사항**:
- 새 필드 추가 시 새 getter만 추가 → ABI 유지
- Core는 "시간 정의"만 제공
```

---

### 4. 철학 검증

**목적**: 구현이 Core Philosophy를 준수하는지 검증

**작성 요령**:
- Three Axes Validation 체크
- Core Philosophy 5대 원칙 체크
- 점수화 가능하면 점수 명시

**필수 체크리스트**:

```markdown
## 철학 검증

### Three Axes Validation

#### TIME (시간 축)
- ✅ 명시적 진행: Update 호출 전까지 시간 정지
- ✅ 결정성: Mock time source 주입 가능
- ✅ 자동 실행 없음: 백그라운드 스레드 없음

#### SPACE (공간 축)
- ✅ 명시적 단위: 마이크로초 (AxisTimeMicroseconds)
- ✅ 오버플로우 제어: uint64_t (584,542년)
- ✅ 명시적 할당: 사용자가 allocator 선택

#### DATA (데이터 축)
- ✅ 투명한 소스: Time source 주입 가능
- ✅ 플랫폼 분리: 논리 시간 vs 플랫폼 시간 분리
- ✅ 명시적 생명주기: 자동 해제 없음

### Core Philosophy Compliance: 100/100

#### ✅ 명시성 (Explicitness)
- Update/Reset = 사용자 호출
- 숨겨진 자동화 없음

#### ✅ 결정성 (Determinism)
- 동일 입력 → 동일 출력
- Time source 주입

#### ✅ 책임 분리 (Separation of Concerns)
- Memory: 수단 제공 (정책 강제 없음)
- Time: 정의 제공 (사용 강제 없음)

#### ✅ 단순성 (Simplicity)
- mutex/atomic 제거
- 단일 스레드 계약

#### ✅ ABI 안정성
- Pure C API
- 개별 함수 → 필드 추가 시 ABI 유지
```

---

### 5. 테스트 결과

**목적**: 구현의 정확성과 철학 준수 증명

**작성 요령**:
- 전체 통과/실패 수치 명시
- 주요 시나리오별 결과 요약
- 성능 특성 (해당되는 경우)

**예시**:
```markdown
## 테스트 결과

### Architecture Review Test
\`\`\`
========================================
AXIS Core Architecture Review
========================================

총 테스트: 16
통과: 16
실패: 0

✅ 모든 아키텍처 검증 통과
========================================
\`\`\`

### 검증 항목 상세
- ✅ **Scenario A**: 명시적 시간 흐름 (6/6)
- ✅ **Scenario B**: 결정성 (1/1)
- ✅ **Scenario C**: Fixed/Variable delta 분리 (2/2)

### 성능 특성
- **Time 정밀도**: 마이크로초 (QueryPerformanceCounter)
- **Memory 오버헤드**: Allocator별 메타데이터만
- **동기화 오버헤드**: 없음 (단일 스레드 계약)
```

---

### 6. 핵심 성과

**목적**: 작업의 주요 달성 사항 요약

**작성 요령**:
- 측정 가능한 성과 나열
- 마일스톤 달성 여부 명시

**예시**:
```markdown
## 핵심 성과

### 1. Core 3대 시스템 완성
- ✅ Memory System: 메모리의 단일 진실 공급원
- ✅ Assert System: 계약 검증의 기준
- ✅ Time System: 시간의 단일 진실 공급원

### 2. 100% Core Philosophy 준수
- 60/100 → 100/100 달성 (Time System 리팩토링)

### 3. 아키텍처 검증 완료
- 16/16 철학 검증 테스트 통과

### 4. 장기 유지보수성 확보
- ABI 안정적 API 설계
- 5년 뒤에도 설명 가능한 설계
```

---

### 7. 다음 계획

**목적**: 후속 작업 명시

**작성 요령**:
- [ ] 체크박스로 미완료 작업 표시
- 우선순위 명시 (해당되는 경우)

**예시**:
```markdown
## 다음 계획

### 1. 플랫폼 확장
- [ ] Linux: clock_gettime(CLOCK_MONOTONIC)
- [ ] macOS: mach_absolute_time

### 2. Service Layer 설계 착수
- Core와 Service의 경계 명확화
- Service는 Core를 기반으로 "편의" 제공

### 3. 추가 Core 시스템 검토
- Logging (단순 출력, 파일 I/O는 Service)
```

---

### 8. 커밋 메시지

**목적**: Git 히스토리에 철학과 의도 기록

**작성 원칙**:
1. **제목**: 50자 이내, 명령형 (`feat:`, `refactor:`, `test:`)
2. **본문**:
   - 무엇을, 왜, 어떻게 변경했는지
   - 철학적 근거 명시
   - 주요 파일 목록
3. **Co-Authored-By**: Claude Code 명시

**브랜치별 메시지**:
- `feature/*`: 구현 내용
- `test/*`: 테스트 내용

**예시**:
```markdown
## 커밋 메시지

### feature/core 브랜치
\`\`\`
feat(core): implement Memory, Assert, Time systems

Implement three fundamental Core systems following "Core is a LAW,
not a SERVICE" philosophy.

Systems implemented:
- Memory System: Single source of truth for memory allocation
  - General allocator (variable-size)
  - Pool allocator (fixed-size)
  - Frame allocator (per-frame linear)
  - Explicit lifecycle (no auto-free)

- Assert System: Contract validation
  - Debug-only activation
  - Custom handler support

- Time System: Single source of truth for time
  - Explicit time progression (manual Update)
  - Deterministic (injectable time source)

Philosophy compliance:
- TIME: Explicit progression, no auto-advance
- SPACE: Explicit units (microseconds)
- DATA: Transparent source, platform injection

Thread-safety contract:
- Single-threaded game loop assumption
- No mutex, no atomic, documented clearly

Architecture:
- Pure C API for ABI stability
- Individual getters instead of struct exposure
- Separation of definition vs usage

Files added:
- include/axis/core/axis_memory.h
- include/axis/core/axis_assert.h
- include/axis/core/axis_time.h
- src/memory/*
- src/assert/*
- src/time/*

🤖 Generated with [Claude Code](https://claude.com/claude-code)

Co-Authored-By: Claude <noreply@anthropic.com>
\`\`\`

### test 브랜치
\`\`\`
test(core): add architecture review validation suite

Add comprehensive philosophy validation tests proving "Axis Core is
already sufficient" through 6 scenarios and 5 final questions.

Test scenarios:
- Scenario A: Explicit time flow
- Scenario B: Determinism
- Scenario C: Fixed/Variable delta separation
- Scenario D: User control
- Scenario E: Frame memory explicit lifecycle
- Scenario F: Explicit failure

Test results: 16/16 passed

Core Philosophy: 100/100 purity achieved

🤖 Generated with [Claude Code](https://claude.com/claude-code)

Co-Authored-By: Claude <noreply@anthropic.com>
\`\`\`
```

---

### 9. 참조

**목적**: 일지 이해에 필요한 배경 지식 제공

**작성 요령**:
- Core Philosophy 핵심 개념 요약
- 자주 참조하는 원칙 명시

**예시**:
```markdown
## 참조

### Core Philosophy
**"Core is a LAW, not a SERVICE"**
- 법칙(Law): 모든 시스템이 따라야 하는 불변의 진리
- 서비스(Service): 편의를 위한 옵션

**Three Axes Validation**
- TIME: 명시적 진행
- SPACE: 명시적 단위
- DATA: 투명한 소스

**Minimalist Strength**
- 작지만 강하다
- 단순함 → 오류 최소화

### API Design Principles
- ABI Stability: Pure C, 개별 함수
- Separation: Definition vs Usage
- Explicitness: No hidden automation
```

---

## 작성 체크리스트

일지 작성 완료 후 다음 항목을 확인하세요:

### 내용 검증
- [ ] 모든 설계 결정에 "왜"가 명시되어 있는가?
- [ ] Before/After 비교가 명확한가? (리팩토링의 경우)
- [ ] Three Axes Validation을 수행했는가?
- [ ] 테스트 결과가 구체적으로 기록되어 있는가?
- [ ] 철학과 무관한 기술적 오류는 제외했는가?

### 구조 검증
- [ ] 모든 필수 섹션이 포함되어 있는가?
- [ ] 코드 블록이 적절히 사용되었는가?
- [ ] 체크리스트(✅/❌)가 명확한가?

### 가독성 검증
- [ ] 5년 뒤에도 이해 가능한가?
- [ ] 새로운 개발자가 맥락을 파악할 수 있는가?
- [ ] 마크다운 포매팅이 올바른가?

### 커밋 메시지 검증
- [ ] 제목이 50자 이내인가?
- [ ] 철학적 근거가 포함되어 있는가?
- [ ] Co-Authored-By가 명시되어 있는가?

---

## 예외 상황 처리

### 기술적 오류만 수정한 경우
→ 일지 작성 불필요, 간단한 커밋 메시지로 충분

**예시**:
```
fix: resolve pch.h include path issue

Add $(ProjectDir) to AdditionalIncludeDirectories
```

### 철학적 결정 없이 기능만 추가한 경우
→ "상세 작업 내용"과 "커밋 메시지"만 작성

### 실험적 구현인 경우
→ "작업 목표"에 실험 의도 명시, "다음 계획"에 검증 계획 포함

---

## 메타데이터 형식

일지 하단에 다음 메타데이터 추가:

```markdown
---

**작성자**: [이름]
**검토자**: [이름] (옵션)
**상태**: ✅ [완료 상태] / ⚠️ [진행 중] / ❌ [실패]
**관련 이슈**: #[이슈 번호] (옵션)
```

---

## 파일 저장 규칙

### 파일명 형식
```
YYYY-MM-DD_[작업명].md
```

**예시**:
- `2025-12-26_Core_Systems_완성.md`
- `2025-12-26_Time_System_리팩토링.md`

### 저장 위치
프로젝트 루트 디렉토리 또는 docs 폴더

---

## 작성 워크플로우

1. **작업 시작 전**: 작업 목표 명확화
2. **작업 중**: 설계 결정과 근거 메모
3. **작업 완료 후**:
   - 일지 초안 작성
   - 체크리스트 검증
   - 커밋 메시지 작성
   - 일지 파일 저장
   - 커밋 & 푸시

---

**문서 버전**: 1.0
**최종 수정**: 2025-12-26
**작성자**: AXIS Engine Team
